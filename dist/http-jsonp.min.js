/*!
 * httpJsonp v1.1.1
 * 
 * Copyright (c) 2019-present Derek Li
 * Released under the MIT License - https://choosealicense.com/licenses/mit/
 * 
 * https://github.com/iDerekLi/http-jsonp
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).httpJsonp=r()}(this,function(){"use strict";function e(){return(e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var r="1.1.1";function t(e){function r(r,n){if("object"==typeof e[n]&&"object"==typeof r)e[n]=t(e[n],r);else if("object"==typeof r&&null!==r){var o="[object Array]"===Object.prototype.toString.call(r)?[]:{};e[n]=t(o,r)}else e[n]=r}for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];for(var c=0,l=o.length;c<l;c++)for(var i in o[c])r(o[c][i],i);return e}function n(e,r,t){if("object"!=typeof e||null===e)throw Error("obj is not an Object type");if(!r)return e;var o="string"==typeof r?r.split("."):r,a=o.length,c=o.shift();if("string"!=typeof c||""===c)throw Error("error attribute path");return a>1?n(e[c],o,t):t!==undefined?e[c]=t:e[c]}function o(e,r){for(var t in r)if(e===r[t])return!0;return!1}function a(e,r){void 0===r&&(r=""),r="boolean"==typeof r?"?":r;var t=[],n=function(r){var n=e[r];if(o(n,["",undefined,null]))return"continue";n.constructor===Array?n.forEach(function(e){t.push(encodeURIComponent(r)+"[]="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n))};for(var a in e)n(a);return t.length?r+t.join("&"):""}var c={baseURL:"",url:"",params:{},callbackProp:!1,callbackNamespase:"__httpJsonpCallback",callbackName:"",timeout:6e4,scriptAttr:{type:"",charset:"",crossOrigin:null,async:!0,defer:!1},keepScriptTag:!1,callback:null,load:null,error:null,complete:null,then:null,"catch":null,"finally":null},l=Date.now();function i(){}var u=function(e,r,t){var o=n(window,e);if(o=e&&!o?n(window,e,{}):o||window,!t)return o[r];o[r]=t},f=function(e,r){e.onload!==undefined?e.onload=function(){r()}:e.onreadystatechange=function(){"loaded"!=e.readyState&&"complete"!=e.readyState||(e.onreadystatechange=null,r())}},p=function(e,r){e.onerror=r};function d(r,n){"string"==typeof r&&(r={url:r}),n||(n={});var o,d,s=t({},c,r||{}),m=e({callback:s.callback,load:s.load,error:s.error,complete:s.complete},n),b=s.params,y="",h="",v=s.callbackNamespase,g=s.callbackProp;function k(){s.keepScriptTag||o.parentNode&&o.parentNode.removeChild(o),h&&u(v,h,i),f(o,i),p(o,i),d&&clearTimeout(d)}function j(){y="cancel",u(v,h)&&k()}g&&""!==b[g]&&(h=b[g]?b[g]:s.callbackName||"jp"+l++,b[g]=v?v+"."+h:h);var w=s.timeout;w&&(d=setTimeout(function(){y="error",k(),m.error&&m.error(new Error("Request Timeout")),m.complete&&m.complete()},w));var N=s.baseURL+s.url;N=(N+=a(b,~N.indexOf("?")?"&":"?")).replace("?&","?"),o=document.createElement("script");var E=s.scriptAttr;for(var O in delete E.text,delete E.src,E)o[O]=E[O];h?u(v,h,function(e){k(),"error"!==y&&(y="callback",m.callback&&m.callback(e),m.complete&&m.complete())}):f(o,function(){k(),"error"!==y&&(y="load",m.load&&m.load(),m.complete&&m.complete())}),p(o,function(){y="error",k(),m.error&&m.error(new Error("script error")),m.complete&&m.complete()}),o.src=N;var R=document.getElementsByTagName("script")[0]||document.head||document.getElementsByTagName("head")[0];return R.parentNode.insertBefore(o,R),{cancel:j}}return d.version=r,d});
